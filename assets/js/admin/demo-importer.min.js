window.wp=window.wp||{},function(c){var n,o;function e(e,t){Backbone.history._hasPushState&&Backbone.Router.prototype.navigate.call(this,e,t)}(n=wp.demos=wp.demos||{}).data=_demoImporterSettings,o=n.data.l10n,n.isInstall=!!n.data.settings.isInstall,_.extend(n,{model:{},view:{},routes:{},router:{},template:wp.template}),n.Model=Backbone.Model.extend({initialize:function(){var e;-1!==_.indexOf(n.data.installedDemos,this.get("slug"))&&this.set({installed:!0}),this.set({id:this.get("slug")||this.get("id")}),this.has("sections")&&(e=this.get("sections").description,this.set({description:e}))}}),n.view.Appearance=wp.Backbone.View.extend({el:"#wpbody-content .wrap .theme-browser",window:c(window),page:0,initialize:function(e){_.bindAll(this,"scroller"),this.SearchView=e.SearchView?e.SearchView:n.view.Search,this.window.bind("scroll",_.throttle(this.scroller,300))},render:function(){this.view=new n.view.Demos({collection:this.collection,parent:this}),this.search(),this.$el.removeClass("search-loading"),this.view.render(),this.$el.empty().append(this.view.el).addClass("rendered")},searchContainer:c(".search-form"),search:function(){var e;1!==n.data.demos.length&&(e=new this.SearchView({collection:this.collection,parent:this}),(this.SearchView=e).render(),this.searchContainer.append(c.parseHTML('<label class="screen-reader-text" for="wp-filter-search-input">'+o.search+"</label>")).append(e.el).on("submit",function(e){e.preventDefault()}))},scroller:function(){var e,t,i=this;e=this.window.scrollTop()+i.window.height(),t=i.$el.offset().top+i.$el.outerHeight(!1)-i.window.height(),(t=Math.round(.9*t))<e&&this.trigger("theme:scroll")},initTipTip:function(){c("#tiptip_holder").removeAttr("style"),c("#tiptip_arrow").removeAttr("style"),c(".tips").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:50})}}),n.Collection=Backbone.Collection.extend({model:n.Model,terms:"",doSearch:function(e){this.terms!==e&&(this.terms=e,0<this.terms.length&&this.search(this.terms),""===this.terms&&(this.reset(n.data.demos),c("body").removeClass("no-results")),this.trigger("demos:update"))},search:function(t){var i,e,r,s,o,a;this.reset(n.data.demos,{silent:!0}),t=(t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")).replace(/ /g,")(?=.*"),i=new RegExp("^(?=.*"+t+").+","i"),0===(e=this.filter(function(e){return s=e.get("name").replace(/(<([^>]+)>)/gi,""),o=e.get("description").replace(/(<([^>]+)>)/gi,""),a=e.get("author").replace(/(<([^>]+)>)/gi,""),r=_.union([s,e.get("id"),o,a,e.get("tags")]),i.test(e.get("author"))&&2<t.length&&e.set("displayAuthor",!0),i.test(r)})).length?this.trigger("query:empty"):c("body").removeClass("no-results"),this.reset(e)},paginate:function(e){var t=this;return e=e||0,t=_(t.rest(20*e)),t=_(t.first(20))},count:!1,query:function(t){var e,i,r,s=this.queries,o=this;if(this.currentQuery.request=t,e=_.find(s,function(e){return _.isEqual(e.request,t)}),(i=_.has(t,"page"))||(this.currentQuery.page=1),e||i){if(i)return this.apiCall(t,i).done(function(e){o.add(e.demos),o.trigger("query:success"),o.loadingDemos=!1}).fail(function(){o.trigger("query:fail")});0===e.demos.length?o.trigger("query:empty"):c("body").removeClass("no-results"),_.isNumber(e.total)&&(this.count=e.total),this.reset(e.demos),e.total||(this.count=this.length),this.trigger("demos:update"),this.trigger("query:success",this.count)}else e=this.apiCall(t).done(function(e){e.demos&&(o.reset(e.demos),r=e.info.results,s.push({demos:e.demos,request:t,total:r})),o.trigger("demos:update"),o.trigger("query:success",r),e.demos&&0===e.demos.length&&o.trigger("query:empty")}).fail(function(){o.trigger("query:fail")})},queries:[],currentQuery:{page:1,request:{}},apiCall:function(e,t){return wp.ajax.send("query-demos",{data:{request:_.extend({per_page:100,fields:{description:!0,tested:!0,requires:!0,rating:!0,downloaded:!0,downloadLink:!0,last_updated:!0,homepage:!0,num_ratings:!0}},e)},beforeSend:function(){t||c("body").addClass("loading-content").removeClass("no-results")}})},loadingDemos:!1}),n.view.Demo=wp.Backbone.View.extend({className:"theme",state:"grid",html:n.template("demo"),events:{click:"preview",keydown:"preview",touchend:"preview",keyup:"addFocus",touchmove:"preventExpand","click .demo-import":"importDemo"},touchDrag:!1,initialize:function(){this.model.on("change",this.render,this)},render:function(){var e=this.model.toJSON();this.$el.html(this.html(e)).attr({tabindex:0,"aria-describedby":e.id+"-action "+e.id+"-name","data-slug":e.id}),this.activeDemo(),this.model.get("displayAuthor")&&this.$el.addClass("display-author")},activeDemo:function(){this.model.get("active")&&this.$el.addClass("active")},addFocus:function(){var e=c(":focus").hasClass("theme")?c(":focus"):c(":focus").parents(".theme");c(".theme.focus").removeClass("focus"),e.addClass("focus")},preventExpand:function(){this.touchDrag=!0},preview:function(e){var t,i,r=this;if(e=e||window.event,!0===this.touchDrag)return this.touchDrag=!1;c(e.target).not(".install-demo-preview").parents(".theme-actions").length||"keydown"===e.type&&13!==e.which&&32!==e.which||"keydown"===e.type&&13!==e.which&&c(":focus").hasClass("button")||(e.preventDefault(),e=e||window.event,n.focusedDemo=this.$el,n.preview=i=new n.view.Preview({model:this.model}),i.render(),this.setNavButtonsState(),1===this.model.collection.length?i.$el.addClass("no-navigation"):i.$el.removeClass("no-navigation"),c("div.wrap").append(i.el),this.listenTo(i,"demo:next",function(){if(t=r.model,_.isUndefined(r.current)||(t=r.current),r.current=r.model.collection.at(r.model.collection.indexOf(t)+1),_.isUndefined(r.current))return r.options.parent.parent.trigger("demo:end"),r.current=t;i.model=r.current,i.render(),this.setNavButtonsState(),c(".next-theme").focus()}).listenTo(i,"demo:previous",function(){t=r.model,0!==r.model.collection.indexOf(r.current)&&(_.isUndefined(r.current)||(t=r.current),r.current=r.model.collection.at(r.model.collection.indexOf(t)-1),_.isUndefined(r.current)||(i.model=r.current,i.render(),this.setNavButtonsState(),c(".previous-theme").focus()))}),this.listenTo(i,"preview:close",function(){r.current=r.model}))},setNavButtonsState:function(){var e=c(".theme-install-overlay"),t=_.isUndefined(this.current)?this.model:this.current;0===this.model.collection.indexOf(t)&&e.find(".previous-theme").addClass("disabled"),_.isUndefined(this.model.collection.at(this.model.collection.indexOf(t)+1))&&e.find(".next-theme").addClass("disabled")},importDemo:function(e){var i=this,t=c(e.target);e.preventDefault(),t.hasClass("disabled")||window.confirm(wp.demos.data.settings.confirmImport)&&(wp.updates.maybeRequestFilesystemCredentials(e),c(document).on("wp-demo-import-success",function(e,t){i.model.get("id")===t.slug&&i.model.set({imported:!0})}),wp.updates.importDemo({slug:t.data("slug")}))}}),n.view.Preview=wp.Backbone.View.extend({className:"wp-full-overlay expanded",el:".theme-install-overlay",events:{"click .close-full-overlay":"close","click .collapse-sidebar":"collapse","click .devices button":"previewDevice","click .previous-theme":"previousDemo","click .next-theme":"nextDemo",keyup:"keyEvent","click .demo-import":"importDemo","click .plugins-install":"installPlugin"},html:n.template("demo-preview"),render:function(){var e,t=this,i=this.model.toJSON(),r=c(document.body);r.attr("aria-busy","true"),this.$el.removeClass("iframe-ready").html(this.html(i)),(e=this.$el.data("current-preview-device"))&&t.tooglePreviewDeviceButtons(e),n.router.navigate(n.router.baseUrl(n.router.demoPath+this.model.get("id")),{replace:!1}),this.$el.fadeIn(200,function(){r.addClass("demo-importer-active full-overlay-active")}),this.$el.find("iframe").one("load",function(){t.iframeLoaded()})},iframeLoaded:function(){this.$el.addClass("iframe-ready"),c(document.body).attr("aria-busy","false")},close:function(){return this.$el.fadeOut(200,function(){c("body").removeClass("demo-importer-active full-overlay-active"),n.focusedTheme&&n.focusedTheme.focus()}).removeClass("iframe-ready"),n.router.selectedTab?(n.router.navigate(n.router.baseUrl("&browse="+n.router.selectedTab)),n.router.selectedTab=!1):n.router.navigate(n.router.baseUrl("")),this.trigger("preview:close"),this.undelegateEvents(),this.unbind(),!1},collapse:function(e){var t=c(e.currentTarget);return"true"===t.attr("aria-expanded")?t.attr({"aria-expanded":"false","aria-label":o.expandSidebar}):t.attr({"aria-expanded":"true","aria-label":o.collapseSidebar}),this.$el.toggleClass("collapsed").toggleClass("expanded"),!1},previewDevice:function(e){var t=c(e.currentTarget).data("device");this.$el.removeClass("preview-desktop preview-tablet preview-mobile").addClass("preview-"+t).data("current-preview-device",t),this.tooglePreviewDeviceButtons(t)},tooglePreviewDeviceButtons:function(e){var t=c(".wp-full-overlay-footer .devices");t.find("button").removeClass("active").attr("aria-pressed",!1),t.find("button.preview-"+e).addClass("active").attr("aria-pressed",!0)},keyEvent:function(e){27===e.keyCode&&(this.undelegateEvents(),this.close()),39===e.keyCode&&_.once(this.nextDemo()),37===e.keyCode&&this.previousDemo()},nextDemo:function(){return this.trigger("demo:next",this.model.cid),!1},previousDemo:function(){return this.trigger("demo:previous",this.model.cid),!1},importDemo:function(e){var i=this,t=c(e.target);e.preventDefault(),t.hasClass("disabled")||window.confirm(wp.demos.data.settings.confirmImport)&&(wp.updates.maybeRequestFilesystemCredentials(e),c(document).on("wp-demo-import-success",function(e,t){i.model.get("id")===t.slug&&i.model.set({imported:!0})}),c(document).on("wp-updates-queue-job",function(e,t){"import-demo"===t.action&&wp.updates.importDemo(t.data)}),wp.updates.importDemo({slug:t.data("slug")}))},installPlugin:function(e){var t=c(".plugins-list-table").find("tr").data("plugin"),o=c(e.target),a=0,n=0,l=[];e.preventDefault(),o.hasClass("disabled")||o.hasClass("updating-message")||(c(".theme-info .update-message").remove(),t.length||(e.preventDefault(),c(".install-theme-info").animate({scrollTop:0}),c(".plugins-details .plugins-info").after(wp.updates.adminNotice({id:"no-items-selected",className:"update-message notice-error notice-alt",message:wp.updates.l10n.noItemsSelected}))),wp.updates.maybeRequestFilesystemCredentials(e),window.confirm(wp.demos.data.settings.confirmInstall)&&(c(document).find('.manage-column [type="checkbox"]').prop("checked",!1),c(document).trigger("wp-plugin-bulk-install",t),t.each(function(e,t){var i=c(t),r=i.parents("tr");r.hasClass("install")&&!r.find("notice-error").length?(o.addClass("updating-message").text(wp.updates.l10n.installing),wp.a11y.speak(wp.updates.l10n.installingMsg,"polite"),wp.updates.queue.push({action:"install-plugin",data:{slug:r.data("slug")}})):i.filter(":not(:disabled)").prop("checked",!1)}),c(document).on("wp-plugin-bulk-install-success wp-plugin-bulk-install-error",function(e,t){var i,r,s=c('[data-slug="'+t.slug+'"]');"wp-"+t.install+"-bulk-install-success"===e.type?a++:(r=t.pluginName?t.pluginName:s.find(".plugin-name").text(),n++,l.push(r+": "+t.errorMessage)),s.find('input[name="checked[]"]:checked').filter(":not(:disabled)").prop("checked",!1),wp.updates.adminNotice=wp.template("wp-bulk-installs-admin-notice"),c(".theme-info .bulk-action-notice").remove(),c(".theme-info .plugins-info").after(wp.updates.adminNotice({id:"bulk-action-notice",className:"bulk-action-notice notice-alt",successes:a,errors:n,errorMessages:l,type:t.install})),i=c("#bulk-action-notice").on("click","button",function(){c(this).toggleClass("bulk-action-errors-collapsed").attr("aria-expanded",!c(this).hasClass("bulk-action-errors-collapsed")),i.find(".bulk-action-errors").toggleClass("hidden")}),wp.updates.queue.length||(0<n?(o.removeClass("updating-message").addClass("disabled").text(wp.updates.l10n.installFailedShort),wp.a11y.speak(wp.updates.l10n.installedMsg,"polite"),c(".theme-about").animate({scrollTop:0})):(o.removeClass("updating-message").addClass("disabled").text(wp.updates.l10n.pluginInstalled),wp.a11y.speak(wp.updates.l10n.installedMsg,"polite"),c(".plugins-activate").removeAttr("disabled")))}),c(document).on("wp-updates-notice-added",function(){wp.updates.adminNotice=wp.template("wp-updates-admin-notice")}),wp.updates.queueChecker()))}}),n.view.Demos=wp.Backbone.View.extend({className:"themes wp-clearfix",$overlay:c("div.theme-overlay"),index:0,count:c(".wrap .demo-count"),liveDemoCount:0,initialize:function(e){var t=this;this.parent=e.parent,this.setView("grid"),t.importedDemo(),this.listenTo(t.collection,"demos:update",function(){t.parent.page=0,t.importedDemo(),t.render(this),t.parent.initTipTip()}),this.listenTo(t.collection,"query:success",function(e){_.isNumber(e)?(t.count.text(e),t.announceSearchResults(e)):(t.count.text(t.collection.length),t.announceSearchResults(t.collection.length))}),this.listenTo(t.collection,"query:empty",function(){c("body").addClass("no-results")}),this.listenTo(this.parent,"demo:scroll",function(){t.renderDemos(t.parent.page)}),this.listenTo(this.parent,"demo:close",function(){t.overlay&&t.overlay.closeOverlay()}),c("body").on("keyup",function(e){t.overlay&&(c("#request-filesystem-credentials-dialog").is(":visible")||(39===e.keyCode&&t.overlay.nextDemo(),37===e.keyCode&&t.overlay.previousDemo(),27===e.keyCode&&t.overlay.collapse(e)))})},render:function(){this.$el.empty(),0<this.options.collection.size()&&this.renderDemos(this.parent.page),this.liveDemoCount=this.collection.count?this.collection.count:this.collection.length,this.count.text(this.liveDemoCount),n.isInstall||this.announceSearchResults(this.liveDemoCount)},renderDemos:function(e){var t=this;t.instance=t.collection.paginate(e),0!==t.instance.size()?(t.instance.each(function(e){t.demo=new n.view.Demo({model:e,parent:t}),t.demo.render(),t.$el.append(t.demo.el),t.listenTo(t.demo,"demo:expand",t.expand,t)}),this.parent.page++):this.parent.trigger("demo:end")},importedDemo:function(){var e;(e=this.collection.findWhere({active:!0}))&&(this.collection.remove(e),this.collection.add(e,{at:0}))},setView:function(e){return e},next:function(e){var t,i;t=this.collection.get(e[0]),(i=this.collection.at(this.collection.indexOf(t)+1))!==undefined&&(this.overlay.closeOverlay(),this.demo.trigger("demo:expand",i.cid))},previous:function(e){var t,i;t=this.collection.get(e[0]),(i=this.collection.at(this.collection.indexOf(t)-1))!==undefined&&(this.overlay.closeOverlay(),this.demo.trigger("demo:expand",i.cid))},announceSearchResults:function(e){0===e?wp.a11y.speak(o.noDemosFound):wp.a11y.speak(o.demosFound.replace("%d",e))}}),n.view.Search=wp.Backbone.View.extend({tagName:"input",className:"wp-filter-search",id:"wp-filter-search-input",searching:!1,attributes:{placeholder:o.searchPlaceholder,type:"search","aria-describedby":"live-search-desc"},events:{input:"search",keyup:"search",blur:"pushState"},initialize:function(e){this.parent=e.parent,this.listenTo(this.parent,"demo:close",function(){this.searching=!1})},search:function(e){"keyup"===e.type&&27===e.which&&(e.target.value=""),this.doSearch(e)},doSearch:_.debounce(function(e){var t={};this.collection.doSearch(e.target.value.replace(/\+/g," ")),this.searching&&13!==e.which?t.replace=!0:this.searching=!0,e.target.value?n.router.navigate(n.router.baseUrl(n.router.searchPath+e.target.value),t):n.router.navigate(n.router.baseUrl(""))},500),pushState:function(e){var t=n.router.baseUrl("");e.target.value&&(t=n.router.baseUrl(n.router.searchPath+encodeURIComponent(e.target.value))),this.searching=!1,n.router.navigate(t)}}),n.Router=Backbone.Router.extend({routes:{"themes.php?page=demo-importer&demo=:slug":"demo","themes.php?page=demo-importer&search=:query":"search","themes.php?page=demo-importer&s=:query":"search","themes.php?page=demo-importer":"demos","":"demos"},baseUrl:function(e){return"themes.php?page=demo-importer"+e},demoPath:"&demo=",searchPath:"&search=",search:function(e){c(".wp-filter-search").val(e)},demos:function(){c(".wp-filter-search").val("")},navigate:e}),n.Run={init:function(){this.demos=new n.Collection(n.data.demos),this.view=new n.view.Appearance({collection:this.demos}),this.render()},render:function(){this.view.render(),this.view.initTipTip(),this.routes(),Backbone.history.start({root:n.data.settings.adminUrl,pushState:!0,hashChange:!1})},routes:function(){var t=this;n.router=new n.Router,n.router.on("route:demo",function(e){t.view.view.expand(e)}),n.router.on("route:demos",function(){t.demos.doSearch(""),t.view.trigger("demo:close")}),n.router.on("route:search",function(){c(".wp-filter-search").trigger("keyup")}),this.extraRoutes()},extraRoutes:function(){return!1}},n.view.InstallerSearch=n.view.Search.extend({events:{input:"search",keyup:"search"},terms:"",search:function(e){("keyup"!==e.type||9!==e.which&&16!==e.which)&&(this.collection=this.options.parent.view.collection,"keyup"===e.type&&27===e.which&&(e.target.value=""),this.doSearch(e.target.value))},doSearch:function(e){var t={};this.terms!==e&&(this.terms=e,"author:"===(t.search=e).substring(0,7)&&(t.search="",t.author=e.slice(7)),"tag:"===e.substring(0,4)&&(t.search="",t.tag=[e.slice(4)]),c(".filter-links li > a.current").removeClass("current").removeAttr("aria-current"),c("body").removeClass("show-filters filters-applied show-favorites-form"),c(".drawer-toggle").attr("aria-expanded","false"),this.collection.query(t),n.router.navigate(n.router.baseUrl(n.router.searchPath+encodeURIComponent(e)),{replace:!0}))}}),n.view.Installer=n.view.Appearance.extend({el:"#wpbody-content .wrap",events:{"click .filter-links li > a":"onSort","click .drawer-toggle":"moreFilters","click .filter-drawer .apply-filters":"applyFilters",'click .filter-group [type="checkbox"]':"addFilter","click .filter-drawer .clear-filters":"clearFilters","click .edit-filters":"backToFilters"},render:function(){var e=this;this.search(),this.collection=new n.Collection,this.listenTo(this,"demo:end",function(){e.collection.loadingDemos||(e.collection.loadingDemos=!0,e.collection.currentQuery.page++,_.extend(e.collection.currentQuery.request,{page:e.collection.currentQuery.page}),e.collection.query(e.collection.currentQuery.request))}),this.listenTo(this.collection,"query:success",function(){c("body").removeClass("loading-content"),c(".theme-browser").find("div.error").remove()}),this.listenTo(this.collection,"query:fail",function(){c("body").removeClass("loading-content"),c(".theme-browser").find("div.error").remove(),c(".theme-browser").find("div.themes").before('<div class="error"><p>'+o.error+'</p><p><button class="button try-again">'+o.tryAgain+"</button></p></div>"),c(".theme-browser .error .try-again").on("click",function(e){e.preventDefault(),c("input.wp-filter-search").trigger("input")})}),this.view&&this.view.remove(),this.view=new n.view.Demos({collection:this.collection,parent:this}),this.page=0,this.$el.find(".themes").remove(),this.view.render(),this.$el.find(".theme-browser").append(this.view.el).addClass("rendered")},browse:function(e){this.collection.query({browse:e})},onSort:function(e){var t=c(e.target),i=t.data("sort");e.preventDefault(),c("body").removeClass("filters-applied show-filters"),c(".drawer-toggle").attr("aria-expanded","false"),t.hasClass(this.activeClass)||(this.sort(i),n.router.navigate(n.router.baseUrl(n.router.browsePath+i)))},sort:function(e){this.clearSearch(),n.router.selectedTab=e,c(".filter-links li > a").removeClass(this.activeClass).removeAttr("aria-current"),c('[data-sort="'+e+'"]').addClass(this.activeClass).attr("aria-current","page"),this.browse(e)},addFilter:function(){this.filtersChecked()},applyFilters:function(e){var t,i=this.filtersChecked(),r={tag:i},s=c(".filtered-by .tags");e&&e.preventDefault(),i?(c("body").addClass("filters-applied"),c(".filter-links li > a.current").removeClass("current").removeAttr("aria-current"),s.empty(),_.each(i,function(e){t=c('label[for="filter-id-'+e+'"]').text(),s.append('<span class="tag">'+t+"</span>")}),this.collection.query(r)):wp.a11y.speak(o.selectFeatureFilter)},filtersChecked:function(){var e=c(".filter-group").find(":checkbox"),t=[];return _.each(e.filter(":checked"),function(e){t.push(c(e).prop("value"))}),0===t.length?(c(".filter-drawer .apply-filters").find("span").text(""),c(".filter-drawer .clear-filters").hide(),c("body").removeClass("filters-applied"),!1):(c(".filter-drawer .apply-filters").find("span").text(t.length),c(".filter-drawer .clear-filters").css("display","inline-block"),t)},activeClass:"current",moreFilters:function(e){var t=c("body"),i=c(".drawer-toggle");if(e.preventDefault(),t.hasClass("filters-applied"))return this.backToFilters();this.clearSearch(),n.router.navigate(n.router.baseUrl("")),t.toggleClass("show-filters"),i.attr("aria-expanded",t.hasClass("show-filters"))},clearFilters:function(e){var t=c(".filter-group").find(":checkbox"),i=this;e.preventDefault(),_.each(t.filter(":checked"),function(e){return c(e).prop("checked",!1),i.filtersChecked()})},backToFilters:function(e){e&&e.preventDefault(),c("body").removeClass("filters-applied")},clearSearch:function(){c("#wp-filter-search-input").val("")}}),n.InstallerRouter=Backbone.Router.extend({routes:{"themes.php?page=demo-importer&demo=:slug":"demo","themes.php?page=demo-importer&browse=:sort":"sort","themes.php?page=demo-importer&search=:query":"search","themes.php?page=demo-importer":"sort"},baseUrl:function(e){return"themes.php?page=demo-importer"+e},demoPath:"&demo=",browsePath:"&browse=",searchPath:"&search=",search:function(e){c(".wp-filter-search").val(e.replace(/\+/g," "))},navigate:e}),n.RunInstaller={init:function(){this.view=new n.view.Installer({section:"all",SearchView:n.view.InstallerSearch}),this.render(),this.view.SearchView.doSearch=_.debounce(this.view.SearchView.doSearch,500)},render:function(){this.view.render(),this.view.initTipTip(),this.routes(),Backbone.History.started&&Backbone.history.stop(),Backbone.history.start({root:n.data.settings.adminUrl,pushState:!0,hashChange:!1})},routes:function(){var t=this,i={};n.router=new n.InstallerRouter,n.router.on("route:preview",function(e){n.preview&&(n.preview.undelegateEvents(),n.preview.unbind()),t.view.view.demo&&t.view.view.demo.preview?(t.view.view.demo.model=t.view.collection.findWhere({slug:e}),t.view.view.demo.preview()):(i.demo=e,t.view.collection.query(i),t.view.collection.trigger("update"),t.view.collection.once("query:success",function(){c('div[data-slug="'+e+'"]').trigger("click")}))}),n.router.on("route:sort",function(e){e||(e="all",n.router.navigate(n.router.baseUrl("&browse=all"),{replace:!0})),t.view.sort(e),n.preview&&n.preview.close()}),n.router.on("route:search",function(){c(".wp-filter-search").focus().trigger("keyup")}),this.extraRoutes()},extraRoutes:function(){return!1}},c(document).ready(function(){n.RunInstaller.init(),c(".themegrill-reset-wordpress").on("click",function(){return window.confirm(_demoImporterSettings.settings.confirmReset)}),c(".themegrill-demo-importer-rating-link").on("click",function(){var e=c(this);c.post(n.data.settings.ajaxUrl,{action:"footer-text-rated"}),e.parent().text(e.data("rated"))})})}(jQuery);
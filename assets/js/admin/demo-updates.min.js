!function(l,d,e){var r=l(document);(d=d||{}).updates=d.updates||{},d.updates.l10n=_.extend(d.updates.l10n,e.l10n||{}),d.updates.addAdminNotice=function(e){var a,t=l(e.selector),s=l(".wp-header-end");delete e.selector,a=d.updates.adminNotice(e),t.length||(t=l("#"+e.id)),t.length?t.replaceWith(a):s.length?l(".wp-header-end").after(a):l(".wrap").find("> h1").after(a),r.trigger("wp-updates-notice-added")},d.updates.importDemo=function(e){var a=l('.demo-import[data-slug="'+e.slug+'"]');return e=_.extend({success:d.updates.importDemoSuccess,error:d.updates.importDemoError},e),a.addClass("updating-message"),a.parents(".theme").addClass("focus"),a.html()!==d.updates.l10n.importing&&a.data("originaltext",a.html()),a.text(d.updates.l10n.importing).attr("aria-label",d.updates.l10n.demoImportingLabel.replace("%s",a.data("name"))),d.a11y.speak(d.updates.l10n.importingMsg,"polite"),l('.install-theme-info, [data-slug="'+e.slug+'"]').removeClass("demo-import-failed").find(".notice.notice-error").remove(),r.trigger("wp-demo-importing",e),d.updates.ajax("import-demo",e)},d.updates.importDemoSuccess=function(e){var a,t=l(".wp-full-overlay-header, .wp-full-overlay-footer, [data-slug="+e.slug+"]");r.trigger("wp-demo-import-success",e),a=t.find(".button-primary").removeClass("updating-message").addClass("updated-message disabled").attr("aria-label",d.updates.l10n.demoImportedLabel.replace("%s",e.demoName)).text(d.updates.l10n.imported),d.a11y.speak(d.updates.l10n.importedMsg,"polite"),setTimeout(function(){e.previewUrl&&(a.siblings(".demo-preview").remove(),a.attr("target","_blank").attr("href",e.previewUrl).removeClass("demo-import updated-message disabled").addClass("live-preview").attr("aria-label",d.updates.l10n.livePreviewLabel.replace("%s",e.demoName)).text(d.updates.l10n.livePreview))},1e3)},d.updates.importDemoError=function(e){var a,t=d.updates.l10n.importFailed.replace("%s",e.errorMessage),s=d.updates.adminNotice({className:"update-message notice-error notice-alt",message:t});d.updates.isValidResponse(e,"import")&&(r.find("body").hasClass("full-overlay-active")?(a=l('.demo-import[data-slug="'+e.slug+'"]'),l(".install-theme-info").prepend(s)):a=l('[data-slug="'+e.slug+'"]').removeClass("focus").addClass("demo-import-failed").append(s).find(".demo-import"),a.removeClass("updating-message").attr("aria-label",d.updates.l10n.demoImportFailedLabel.replace("%s",a.data("name"))).text(d.updates.l10n.importFailedShort),d.a11y.speak(t,"assertive"),r.trigger("wp-demo-import-error",e))},d.updates.deleteDemo=function(e){var a=l(".theme-actions .delete-demo");return e=_.extend({success:d.updates.deleteDemoSuccess,error:d.updates.deleteDemoError},e),a&&a.html()!==d.updates.l10n.deleting&&a.data("originaltext",a.html()).text(d.updates.l10n.deleting),d.a11y.speak(d.updates.l10n.deleting,"polite"),l(".theme-info .update-message").remove(),r.trigger("wp-demo-deleting",e),d.updates.ajax("delete-demo",e)},d.updates.deleteDemoSuccess=function(e){d.a11y.speak(d.updates.l10n.deleted,"polite"),r.trigger("wp-demo-delete-success",e)},d.updates.deleteDemoError=function(e){var a=l(".theme-actions .delete-demo"),t=d.updates.l10n.deleteFailed.replace("%s",e.errorMessage),s=d.updates.adminNotice({className:"update-message notice-error notice-alt",message:t});d.updates.maybeHandleCredentialError(e,"delete-demo")||(l(".theme-info .theme-description").before(s),a.html(a.data("originaltext")),d.a11y.speak(t,"assertive"),r.trigger("wp-demo-delete-error",e))},d.updates.bulkInstallPlugin=function(e){var a=l('tr[data-slug="'+e.slug+'"]'),t=a.find(".plugin-status span");return e=_.extend({success:d.updates.bulkInstallPluginSuccess,error:d.updates.bulkInstallPluginError},e),t.html()!==d.updates.l10n.installing&&t.data("originaltext",t.html()),t.addClass("updating-message").attr("aria-label",d.updates.l10n.pluginInstallingLabel.replace("%s",a.data("name"))).text(d.updates.l10n.installing),d.a11y.speak(d.updates.l10n.installingMsg,"polite"),r.trigger("wp-plugin-bulk-installing",e),d.updates.ajax("install-plugin",e)},d.updates.bulkInstallPluginSuccess=function(e){l('tr[data-slug="'+e.slug+'"]').removeClass("install").addClass("installed").find(".plugin-status span").removeClass("updating-message install-now").addClass("updated-message active").attr("aria-label",d.updates.l10n.pluginInstalledLabel.replace("%s",e.pluginName)).text(d.updates.l10n.pluginInstalled),d.a11y.speak(d.updates.l10n.installedMsg,"polite"),r.trigger("wp-plugin-bulk-install-success",e)},d.updates.bulkInstallPluginError=function(e){var a,t=l('tr[data-slug="'+e.slug+'"]'),s=t.find(".plugin-status span");d.updates.isValidResponse(e,"install")&&(d.updates.maybeHandleCredentialError(e,"install-plugin")||(a=d.updates.l10n.installFailed.replace("%s",e.errorMessage),s.removeClass("updating-message").addClass("updated-message").attr("aria-label",d.updates.l10n.pluginInstallFailedLabel.replace("%s",t.data("name"))).text(d.updates.l10n.installFailedShort),d.a11y.speak(a,"assertive"),r.trigger("wp-plugin-bulk-install-error",e)))},d.updates.isValidResponse=function(e,a){var t,s=d.updates.l10n.unknownError;if(_.isObject(e)&&!_.isFunction(e.always))return!0;switch(_.isString(e)&&"-1"===e?s=d.updates.l10n.nonceError:_.isString(e)?s=e:"undefined"!=typeof e.readyState&&0===e.readyState?s=d.updates.l10n.connectionError:_.isString(e.statusText)&&(s=e.statusText+" "+d.updates.l10n.statusTextLink),a){case"import":t=d.updates.l10n.importFailed}return t=t.replace("%s",s),d.updates.addAdminNotice({id:"unknown_error",className:"notice-error is-dismissible",message:_.unescape(t)}),l(".button.updating-message").removeClass("updating-message").removeAttr("aria-label").text(d.updates.l10n.updateFailedShort),d.a11y.speak(t,"assertive"),!1},d.updates.queueChecker=function(){var e;if(!d.updates.ajaxLocked&&d.updates.queue.length){switch((e=d.updates.queue.shift()).action){case"import-demo":d.updates.importDemo(e.data);break;case"delete-demo":d.updates.deleteDemo(e.data);break;case"install-plugin":d.updates.bulkInstallPlugin(e.data)}r.trigger("wp-updates-queue-job",e)}}}(jQuery,window.wp,window._demoUpdatesSettings);
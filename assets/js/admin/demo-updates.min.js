!function(l,r){var i=l(document),o=r.i18n.__,m=r.i18n._x,d=r.i18n.sprintf;(r=r||{}).updates=r.updates||{},r.updates.importDemo=function(e){var t=l('.demo-import[data-slug="'+e.slug+'"]');return i.find("body").hasClass("full-overlay-active")&&(t=l(".wp-full-overlay-header, .wp-full-overlay-footer").find(".demo-import")),e=_.extend({success:r.updates.importDemoSuccess,error:r.updates.importDemoError},e),t.addClass("updating-message"),t.parents(".theme").addClass("focus"),t.html()!==o("Importing...","themegrill-demo-importer")&&t.data("originaltext",t.html()),t.text(o("Importing...","themegrill-demo-importer")).attr("aria-label",d(m("Importing %s...","demo","themegrill-demo-importer"),t.data("name"))),r.a11y.speak(o("Importing... please wait.","themegrill-demo-importer"),"polite"),l('.install-theme-info, [data-slug="'+e.slug+'"]').removeClass("demo-import-failed").find(".notice.notice-error").remove(),i.trigger("wp-demo-importing",e),r.updates.ajax("import-demo",e)},r.updates.importDemoSuccess=function(e){var t,a=l(".wp-full-overlay-header, .wp-full-overlay-footer, [data-slug="+e.slug+"]");i.trigger("wp-demo-import-success",e),t=a.find(".button-primary").removeClass("updating-message").addClass("updated-message disabled").attr("aria-label",d(m("%s imported!","demo","themegrill-demo-importer"),e.demoName)).text(o("Imported!","themegrill-demo-importer")),r.a11y.speak(o("Import completed successfully.","themegrill-demo-importer"),"polite"),setTimeout(function(){e.previewUrl&&(t.siblings(".demo-preview").remove(),t.attr("target","_blank").attr("href",e.previewUrl).removeClass("demo-import updated-message disabled").addClass("live-preview").attr("aria-label",d(m("Live Preview %s","demo","themegrill-demo-importer"),e.demoName)).text(o("Live Preview","themegrill-demo-importer")))},1e3),function s(){var e=document.querySelector(".modal-message");e?e.classList.add("modal-message--is-visible"):function t(){document.body.insertAdjacentHTML("beforeend",'<div class="modal-message modal-message--is-visible"><div class="modal-message__inner"><h2 class="modal-message__title">Modal Message Header</h2><p class="modal-message__description">We will have an online order system in place soon. Until then, connect with us on any of the platforms below!</p></div><div class="modal-message__close">X</div> </div>')}();!function a(){function t(){document.querySelector(".modal-message").classList.remove("modal-message--is-visible")}document.querySelector(".modal-message__close").addEventListener("click",function(){t()}),document.addEventListener("keyup",function(e){27===e.keyCode&&t()})}()}()},r.updates.importDemoError=function(e){var t,a=d(o("Import failed: %s","themegrill-demo-importer"),e.errorMessage),s=r.updates.adminNotice({className:"update-message notice-error notice-alt",message:a});r.updates.isValidResponse(e,"import")&&(r.updates.maybeHandleCredentialError(e,"import-demo")||(i.find("body").hasClass("full-overlay-active")?(t=l('.demo-import[data-slug="'+e.slug+'"]'),l(".install-theme-info").prepend(s)):t=l('[data-slug="'+e.slug+'"]').removeClass("focus").addClass("demo-import-failed").append(s).find(".demo-import"),t.removeClass("updating-message").attr("aria-label",d(m("%s import failed","demo","themegrill-demo-importer"),t.data("name"))).text(o("Import Failed!","themegrill-demo-importer")),r.a11y.speak(a,"assertive"),i.trigger("wp-demo-import-error",e)))},r.updates.bulkInstallPlugin=function(e){var t,a,s;return e=_.extend({success:r.updates.bulkInstallPluginSuccess,error:r.updates.bulkInstallPluginError},e),i.find("body").hasClass("full-overlay-active")?(t=l('tr[data-slug="'+e.slug+'"]'),a=l('.theme-install-overlay .demo-import[data-slug="'+e.demo+'"]'),s=d(m("Installing %s...","plugin","themegrill-demo-importer"),t.data("name")),t.find(".plugin-status span").addClass("updating-message").attr("aria-label",d(m("Installing %s...","plugin","themegrill-demo-importer"),t.data("name"))).text(o("Installing...","themegrill-demo-importer"))):(a=l('.demo-import[data-slug="'+e.demo+'"]'),s=d(m("Installing %s...","plugin","themegrill-demo-importer"),e.name),a.parents(".theme").addClass("focus")),a.html()!==o("Installing...","themegrill-demo-importer")&&a.data("originaltext",a.html()),a.attr("aria-label",s).addClass("updating-message").text(o("Installing...","themegrill-demo-importer")),r.a11y.speak(o("Installing... please wait.","themegrill-demo-importer"),"polite"),i.trigger("wp-plugin-bulk-installing",e),r.updates.ajax("install-required-plugin",e)},r.updates.bulkInstallPluginSuccess=function(e){l('tr[data-slug="'+e.slug+'"]').removeClass("install").addClass("installed").find(".plugin-status span").removeClass("updating-message install-now").addClass("updated-message active").attr("aria-label",d(m("%s installed!","plugin","themegrill-demo-importer"),e.pluginName)).text(m("Installed!","plugin","themegrill-demo-importer")),r.a11y.speak(o("Installation completed successfully.","themegrill-demo-importer"),"polite"),i.trigger("wp-plugin-bulk-install-success",e)},r.updates.bulkInstallPluginError=function(e){var t,a=l('tr[data-slug="'+e.slug+'"]'),s=a.find(".plugin-status span");r.updates.isValidResponse(e,"install")&&(r.updates.maybeHandleCredentialError(e,"install-plugin")||(t=d(o("Installation failed: %s","themegrill-demo-importer"),e.errorMessage),s.removeClass("updating-message").addClass("updated-message").attr("aria-label",d(m("%s installation failed","plugin","themegrill-demo-importer"),a.data("name"))).text(o("Installation Failed!","themegrill-demo-importer")),r.a11y.speak(t,"assertive"),i.trigger("wp-plugin-bulk-install-error",e)))},r.updates.isValidResponse=function(e,t){var a,s=o("Something went wrong.","themegrill-demo-importer");if(_.isObject(e)&&!_.isFunction(e.always))return!0;switch(_.isString(e)&&"-1"===e?s=o("An error has occurred. Please reload the page and try again.","themegrill-demo-importer"):_.isString(e)?s=e:"undefined"!=typeof e.readyState&&0===e.readyState?s=o("Connection lost or the server is busy. Please try again later.","themegrill-demo-importer"):_.isString(e.statusText)&&(s=e.statusText+' <a href="https://docs.themegrill.com/knowledgebase/demo-import-process-failed/" target="_blank">'+o("Try this solution!","themegrill-demo-importer")+"</a>"),t){case"import":a=o("Import failed: %s","themegrill-demo-importer");break;case"install":a=o("Installation failed: %s","themegrill-demo-importer")}return a=a.replace("%s",s),r.updates.addAdminNotice({id:"unknown_error",className:"notice-error is-dismissible",message:_.unescape(a)}),r.updates.ajaxLocked=!1,r.updates.queue=[],l(".button.updating-message").removeClass("updating-message").removeAttr("aria-label").text(o("Import Failed!","themegrill-demo-importer")),r.a11y.speak(a,"assertive"),!1},r.updates.queueChecker=function(){var e;if(!r.updates.ajaxLocked&&r.updates.queue.length){switch((e=r.updates.queue.shift()).action){case"import-demo":r.updates.importDemo(e.data);break;case"install-plugin":r.updates.bulkInstallPlugin(e.data)}i.trigger("wp-updates-queue-job",e)}}}(jQuery,window.wp);